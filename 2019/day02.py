import sys

test = (
    [1,9,10,3,2,3,11,0,99,30,40,50],
    [1,0,0,0,99],
    [2,3,0,3,99],
    [2,4,4,5,99,0],
    [1,1,1,4,99,5,6,0,99]
)

# This program computes 466644 + 216000 x [1] + [2];

real = [
    1,0,0,3,
    1,1,2,3,
    1,3,4,3,
    1,5,0,3,
    2,1,6,19,
    2,19,6,23,
    1,23,5,27,
    1,9,27,31,
    1,31,10,35,
    2,35,9,39,
    1,5,39,43,
    2,43,9,47,
    1,5,47,51,
    2,51,13,55,
    1,55,10,59,
    1,59,10,63,
    2,9,63,67,
    1,67,5,71,
    2,13,71,75,
    1,75,10,79,
    1,79,6,83,
    2,13,83,87,
    1,87,6,91,
    1,6,91,95,
    1,10,95,99,
    2,99,6,103,
    1,103,5,107,
    2,6,107,111,
    1,10,111,115,
    1,115,5,119,
    2,6,119,123,
    1,123,5,127,
    2,127,6,131,
    1,131,5,135,
    1,2,135,139,
    1,139,13,0,
    99,2,0,14,0
]

def run(pgm):
    pc = 0;
    while 1:
        opcode = pgm[pc]
        if opcode == 1:
            pgm[pgm[pc+3]] = pgm[pgm[pc+1]] + pgm[pgm[pc+2]]
            pc += 4
        elif opcode == 2:
            pgm[pgm[pc+3]] = pgm[pgm[pc+1]] * pgm[pgm[pc+2]]
            pc += 4
        elif opcode == 99:
            return pgm

for p in test:
    print( run( p ) )

def testrun( pgm, p1, p2 ):
    base = pgm[:]
    base[1] = p1
    base[2] = p2
    return run(base)[0]

# Part 1.

print(testrun(real,12,2))

# Part 2, brute force.
# Answer 8976.
# (19690720 - 466644) // 216000 == 89
# (19690720 - 466644 - 216000 * 89) == 76.

for i in range(100):
    for j in range(100):
        k = testrun(real,i,j)
        print(i, j, k )
        if k == 19690720:
            print( "***", i * 100 + j, "***" )
            sys.exit(1)
